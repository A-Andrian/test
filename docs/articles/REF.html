<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>REF </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="REF ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../favicon.png">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../toc">
    <meta property="docfx:tocrel" content="toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="" width="100" height="50">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../articles/intro.html" title="User Guide">User Guide</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="intro.html" title="Introduction" class="">Introduction</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="Tools.html" title="Tools" class="">Tools</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="EasySQL.html" title="EasySQL" class="">EasySQL</a>
                          </li>
                          <li class="">
                            <a href="ConnMan.html" title="Connection Manager" class="">Connection Manager</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="Gens.html" title="Generators" class="">Generators</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="TBL.html" title="TBL" class="">TBL</a>
                          </li>
                          <li class="">
                            <a href="COL.html" title="COL" class="">COL</a>
                          </li>
                          <li class="">
                            <a href="UNI.html" title="UNI" class="">UNI</a>
                          </li>
                          <li class="active">
                            <a href="REF.html" title="REF" class="active">REF</a>
                          </li>
                          <li class="">
                            <a href="DEF.html" title="DEF" class="">DEF</a>
                          </li>
                          <li class="">
                            <a href="FLD.html" title="FLD" class="">FLD</a>
                          </li>
                          <li class="">
                            <a href="SET.html" title="SET" class="">SET</a>
                          </li>
                          <li class="">
                            <a href="VAL.html" title="VAL" class="">VAL</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="DataAna.html" title="Data Analytics" class="">Data Analytics</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="KMeans.html" title="K Means Clustering" class="">K Means Clustering</a>
                          </li>
                          <li class="">
                            <a href="NBC.html" title="Naive Bayes Classifier" class="">Naive Bayes Classifier</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="ref">REF</h1>

<h5 id="violation-of-referential-identity">Violation of referential identity</h5>
<p>The REF generator is used to detect referential integrity violations: 
i.e. instances, where an attribute in one table is a reference to an entry in a second table, and that entry does not exist. </p>
<p>The REF generator may be used directly as a worksheet function. 
Rather than doing this, we suggest using the REF dialog from the menu bar, especially when using this function for the first time.  </p>
<p><img src="../images/REF/nav.png" alt="REF_ribbon"><br><em>Figure 1: location of the REF ribbon</em></p>
<h2 id="example">Example</h2>
<p>Consider the database of a retailer with two entities: PURCHASES and CUSTOMERS. 
An attribute of each purchase is the id of the customer who carried it out. 
If a referenced customer does not exist, referential integrity is violated. 
This is demonstrated in the below example. 
We see that purchases 1 and 3 are linked to a customer that is not listed. </p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="../images/REF/purchases.png" alt="REFpurchases"></th>
<th style="text-align:center"><img src="../images/REF/customers.png" alt="REF_customers"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>Table 1: Purchases</em></td>
<td style="text-align:center"><em>Table 2: Customers</em></td>
</tr>
</tbody>
</table>
<p>We may check referential integrity for an entire table or a defined subset thereof. 
For instance, in the above example, we may only care about purchases made in 2021. 
The pattern can account for that via the SCOPE parameter and limit the search for violations to that scope.
As a result, only the reference to the customer with ID = 5 would be reported, as shown below: </p>
<p><img src="../images/REF/executed.png" alt="REF_executed"><br><em>Table 3: Executed REF generator</em></p>
<h2 id="settings">Settings</h2>
<p>The pattern is instantiated via eight parameters, four related to the source (the referencing table) and four to the target (the referenced table).
The source and target are each defined via two parameters:  </p>
<ul>
<li>the <code>source schema</code> / <code>target schema</code>
(providing for databases where identically named tables may exist in different schemas)</li>
<li>the <code>source table</code> / <code>target table</code> </li>
</ul>
<p>The third parameter specifies the referencing and referenced keys, respectively:</p>
<ul>
<li>the <code>source foreign key</code> is the referencing key of the source table</li>
<li>the <code>target unique key</code> is the referenced key of the target table, where it must be unique  </li>
</ul>
<p>When either key is a compound key, the attributes it is composed of are specified as a comma-separated list.
The fourth parameter defines the scope, i.e. the subset of the source / target tables to be included in the check:</p>
<ul>
<li>the <code>source scope</code> defines the subset of the referencing table to be included in the check </li>
<li>the <code>target scope</code> defines the subset of the referenced table to be included in the check  </li>
</ul>
<p>The SCOPE is specified in the syntax of an SQL &quot;where clause&quot;. It is an optional parameter. 
When left blank, the scope is the entire table. </p>
<p>In the below screenshot, we illustrate how the parameters would be chosen to implement the example check described above. 
We assume, that the data is stored in an Excel workbook &quot;Test_Data.xlsx&quot; with purchases stored in the worksheet &quot;Purchases&quot; and customers stored in a second worksheet named &quot;Customers&quot;. </p>
<p><img src="../images/REF/settings.png" alt="REF_settings"><br><em>Table 4: REF settings</em></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/RIVACON/Rivalytics/blob/docFX/Rivalytics/articles/REF.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Created by <strong>RIVACON</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
